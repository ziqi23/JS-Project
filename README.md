## Overview

Space Defense is a 3D space themed shooter also incorporating role-playing aspects (e.g. levels, experience bar). As the main character, you've journeyed through space and landed on a planet far, far away, only to find...

Survive for as long as you can and protect your base, your last chance of returning to earth.

Click [here](https://ziqi23.github.io/JS-Project/) to play now!

## Basic Controls

Toggle Instructions: `P` <br>
Movement: `WASD` <br>
Jump: `Space` <br>
Aim/Shoot: `Cursor & Left-click` <br>
Camera Adjustment: `Right-click` <br>
Drink Potions: `Q & E` <br>

## Library Usage

`Three.js` - Utilized for creating elements of the game world and rendering its contents. 
Specifically, the following elements were created using this library:

### Main Components
1. the `camera`, the coordinates of which represent the player's viewpoint.
2. the `scene`, where all models live. Also makes individual models accessible through `scene.children`,
3. the `light`, 
4. the `simple 3d models`, which were creating using the library's built in geometries as well as `TextureLoader` to apply a texture coating,
5. the `complex 3D models`, which were imported using the `OBJLoader` and `GLTFLoader` functionality,

### Supporting Components
1. THREE.Raycaster - assists in determining the coordinate at which the player's cursor is pointing.
2. THREE.Clock - implements an internal clock to keep track of game time allowing for dynamic game design.

## Key Features

### 1. RPG Elements
Inspired by traditional RPG games, `Space Defense` showcases different skills (attack patterns) that can be toggled between by the player, an experience system increasing based on the number of enemies eliminated, HP and MP bars as well as potions.

The UI class tracks all of the above attributes, and within each frame of the game rendering, updates the UI display through DOM manipulation to dynamically present accurate HP, MP and EXP data.

<br>

Dynamically update HP potion count
```js
if (document.getElementById("potion-count")) {
    document.getElementById("potion-count").innerHTML = `${this.potions}`;
} else {
    let potionCount = document.createElement("h1");
    potionCount.setAttribute("id", "potion-count");
    potionCount.innerHTML = `${this.potions}`;
    potionCount.style.position = 'absolute';
    potionCount.style.zIndex = "40";
    document.getElementById("ui").appendChild(potionCount);
}
```

<br>

Dynamically update HP bar display based on current health
```
let health = document.getElementById("hp-img");
health.style.height = `${this.health / 100 * 215}px`
```

### 2. Player Movement

Movement is simulated by listening for keydown events and shifting the player's position as well as the camera's position accordingly. Player can move in eight directions and can also jump. Gravity is simulated by gradually decreasing the player's y coordinate until it collides with another object.

Upon keypress:
```js
if (this.movementState.jump && Math.floor(box6.position.y) === 0) {
    box6.position.y += 3;
    this.movementState.jump = false;
} else {
    this.movementState.jump = false;
}
```

<br>

Within each frame:
```js
if (objects.box6.position.y - 1.5 > plane.position.y) {
    objects.box6.position.y += -0.05;
}
```
            
### 3. Projectile and Collision Management

Projectiles in the game may be generated by either the player or the enemies. Projectiles are initially fixed to the position where they were generated (i.e. player's position or enemy position). After generation, `THREE.Raycaster` is used to determine the direction at which the projectile fires at.

In each frame, projectiles are moved based on their set direction. Either collision logic or removal logic may be triggered to handle these projectiles if they collide with another object or fly too far away from the scene.
